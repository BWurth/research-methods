<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Bernd Wurth">

<title>MGT4018/MGT4090 Lab 1 – Research Methods in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Research Methods in R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#exercise-a-creating-and-exploring-a-dataset-in-r" id="toc-exercise-a-creating-and-exploring-a-dataset-in-r" class="nav-link" data-scroll-target="#exercise-a-creating-and-exploring-a-dataset-in-r"><span class="header-section-number">2</span> Exercise A: Creating and Exploring a Dataset in R</a>
  <ul class="collapse">
  <li><a href="#step-a1-setup" id="toc-step-a1-setup" class="nav-link" data-scroll-target="#step-a1-setup"><span class="header-section-number">2.1</span> Step A1: Setup</a></li>
  <li><a href="#step-a2-creating-or-loading-the-dataset" id="toc-step-a2-creating-or-loading-the-dataset" class="nav-link" data-scroll-target="#step-a2-creating-or-loading-the-dataset"><span class="header-section-number">2.2</span> Step A2: Creating or Loading the Dataset</a></li>
  <li><a href="#step-a3-modifying-your-dataset" id="toc-step-a3-modifying-your-dataset" class="nav-link" data-scroll-target="#step-a3-modifying-your-dataset"><span class="header-section-number">2.3</span> Step A3: Modifying your Dataset</a></li>
  <li><a href="#step-a4-frequency-tables-summary-statistics" id="toc-step-a4-frequency-tables-summary-statistics" class="nav-link" data-scroll-target="#step-a4-frequency-tables-summary-statistics"><span class="header-section-number">2.4</span> Step A4: Frequency Tables (Summary Statistics)</a></li>
  <li><a href="#step-a5-cross-tabulation" id="toc-step-a5-cross-tabulation" class="nav-link" data-scroll-target="#step-a5-cross-tabulation"><span class="header-section-number">2.5</span> Step A5: Cross-Tabulation</a></li>
  <li><a href="#step-a6-saving-frequency-tables-and-cross-tabulations" id="toc-step-a6-saving-frequency-tables-and-cross-tabulations" class="nav-link" data-scroll-target="#step-a6-saving-frequency-tables-and-cross-tabulations"><span class="header-section-number">2.6</span> Step A6: Saving Frequency Tables and Cross-Tabulations</a></li>
  </ul></li>
  <li><a href="#exercise-b-reports-and-tables" id="toc-exercise-b-reports-and-tables" class="nav-link" data-scroll-target="#exercise-b-reports-and-tables"><span class="header-section-number">3</span> Exercise B: Reports and Tables</a>
  <ul class="collapse">
  <li><a href="#step-b1-setup" id="toc-step-b1-setup" class="nav-link" data-scroll-target="#step-b1-setup"><span class="header-section-number">3.1</span> Step B1: Setup</a></li>
  <li><a href="#step-b2-loading-the-data" id="toc-step-b2-loading-the-data" class="nav-link" data-scroll-target="#step-b2-loading-the-data"><span class="header-section-number">3.2</span> Step B2: Loading the Data</a></li>
  <li><a href="#step-b3-exploring-your-data" id="toc-step-b3-exploring-your-data" class="nav-link" data-scroll-target="#step-b3-exploring-your-data"><span class="header-section-number">3.3</span> Step B3: Exploring your Data</a></li>
  <li><a href="#step-b4-exploring-participants-age" id="toc-step-b4-exploring-participants-age" class="nav-link" data-scroll-target="#step-b4-exploring-participants-age"><span class="header-section-number">3.4</span> Step B4: Exploring Participants’ Age</a></li>
  <li><a href="#step-b5-cross-tabulations" id="toc-step-b5-cross-tabulations" class="nav-link" data-scroll-target="#step-b5-cross-tabulations"><span class="header-section-number">3.5</span> Step B5: Cross-Tabulations</a></li>
  </ul></li>
  <li><a href="#exercise-c-reports-and-tables" id="toc-exercise-c-reports-and-tables" class="nav-link" data-scroll-target="#exercise-c-reports-and-tables"><span class="header-section-number">4</span> Exercise C: Reports and Tables</a>
  <ul class="collapse">
  <li><a href="#step-c1-setup" id="toc-step-c1-setup" class="nav-link" data-scroll-target="#step-c1-setup"><span class="header-section-number">4.1</span> Step C1: Setup</a></li>
  <li><a href="#step-c2-histograms" id="toc-step-c2-histograms" class="nav-link" data-scroll-target="#step-c2-histograms"><span class="header-section-number">4.2</span> Step C2: Histograms</a></li>
  <li><a href="#step-c3-bar-charts" id="toc-step-c3-bar-charts" class="nav-link" data-scroll-target="#step-c3-bar-charts"><span class="header-section-number">4.3</span> Step C3: Bar Charts</a></li>
  <li><a href="#step-c4-line-graphs" id="toc-step-c4-line-graphs" class="nav-link" data-scroll-target="#step-c4-line-graphs"><span class="header-section-number">4.4</span> Step C4: Line Graphs</a></li>
  <li><a href="#step-c5-scatterplots" id="toc-step-c5-scatterplots" class="nav-link" data-scroll-target="#step-c5-scatterplots"><span class="header-section-number">4.5</span> Step C5: Scatterplots</a></li>
  </ul></li>
  <li><a href="#summary-3" id="toc-summary-3" class="nav-link" data-scroll-target="#summary-3"><span class="header-section-number">5</span> Summary</a></li>
  </ul>
<div class="toc-actions"><ul class="collapse"><li><a href="https://github.com/bwurth/research-methods/edit/main/lab-uofg-01/lab-uofg-01.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/bwurth/research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="lab-uofg-01.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">MGT4018/MGT4090 Lab 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Bernd Wurth </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>This lab is the same as the SPSS Lab 1 for MGT4018 and MGT4090. We use base R functions as the default. While there are many R packages available, understanding base R operations provides a strong foundation for data analysis.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alternatives using R packages
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Alternatives for achieving the same outcomes using different R packages are provided in green boxes. If you want to explore these alternatives, each box will introduce the respective package, how to install and use it, and the outputs it can produce.</p>
</div>
</div>
</div>
</section>
<section id="exercise-a-creating-and-exploring-a-dataset-in-r" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Exercise A: Creating and Exploring a Dataset in R</h1>
<p>This lab will guide you through creating a dataset, assigning labels, and conducting basic analyses using R. You will learn how to create variables, enter data, and generate summary tables similar to those you would in SPSS.</p>
<section id="step-a1-setup" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="step-a1-setup"><span class="header-section-number">2.1</span> Step A1: Setup</h2>
<p>Before starting any work in R, it is important to organize your files. This ensures that your scripts, datasets, and outputs are easy to manage and reproducible. Projects are strongly recommended for better organization and reproducibility, but setting a working directory is an alternative if needed (see also the respective section in <code>0. Getting Started</code>).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can either work through the following steps and copy/paste the respective code into the <code>Lab_Exercise_A.R</code> file that you will create in Step 1 or <a href="../scripts/lab-uofg-01/Lab1_Exercise_A.R" download="Lab1_Exercise_A.R">download the R script for Exercise A</a> and follow the instructions below and save the downloaded file in the <code>scripts</code> folder that you will create.</p>
</div>
</div>
<section id="option-1-create-a-project" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="option-1-create-a-project"><span class="header-section-number">2.1.1</span> Option 1: Create a Project</h3>
<p>The best way to organize your work is to create an RStudio project. This keeps all related files in a single folder. Follow these steps:</p>
<ol type="1">
<li>Open RStudio.</li>
<li>Go to <strong>File &gt; New Project</strong>.</li>
<li>Select <strong>New Directory</strong> and then <strong>New Project</strong>.</li>
<li>Choose a location on your computer and give the project a name, e.g., <code>ResearchMethodsLab</code>. Avoid spaces in folder and file names.</li>
<li>Click <strong>Create Project</strong>. RStudio will open a new session within the project folder.</li>
<li>It is good practice to not have you files in this main folder, but create a set of subfolders similar to the following. Navigate to your project folder and create the following subfolders:</li>
</ol>
<pre><code>ResearchMethodsLab/
├── data/
├── scripts/
├── output/
│   ├── figures/
│   └── tables/
├── docs/
└── ResearchMethodsLab.Rproj</code></pre>
<ol start="7" type="1">
<li>Create a new <strong>R script</strong>: Go to <strong>File &gt; New File &gt; R Script</strong>.</li>
<li>Save the script in your <code>scripts</code> folder with an appropriate name, e.g., <code>Lab1_Exercise_A.R</code>.</li>
</ol>
<p>Now you are ready to begin your work in R and continue with Step A2!</p>
</section>
<section id="option-2-set-working-directory-manually" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="option-2-set-working-directory-manually"><span class="header-section-number">2.1.2</span> Option 2: Set Working Directory Manually</h3>
<p>If you are not using a project, you will need to set a working directory manually. The working directory is the folder where R looks for files and saves outputs.</p>
<ol type="1">
<li>In your Finder (Mac) or Explorer (Windows), create a new folder for the R Labs (e.g., <code>ResearchMethodsLab</code>) as well as the subfolder structure below. Avoid spaces in folder and file names.</li>
</ol>
<pre><code>ResearchMethodsLab/
├── data/
├── scripts/
├── output/
│   ├── figures/
│   └── tables/
└── docs/</code></pre>
<ol start="2" type="1">
<li>Open RStudio.</li>
<li>Create a new <strong>R script</strong>: Go to <strong>File &gt; New File &gt; R Script</strong>.</li>
<li>Save the script in the <code>scripts</code> folder that you previously created with an appropriate name, e.g., <code>Lab_Exercise_A.R</code>.</li>
<li>Set the working directory in your script using the <code>setwd()</code> function. Copy the following code into your script, change the path to the older that you created, and execute the script.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"path/to/your/folder"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can check whether the working directory is set to the folder that you want to by using the following code:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the current working directory</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now you are ready to begin your work in R and continue with Step A2!</p>
</section>
</section>
<section id="step-a2-creating-or-loading-the-dataset" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="step-a2-creating-or-loading-the-dataset"><span class="header-section-number">2.2</span> Step A2: Creating or Loading the Dataset</h2>
<p>For practice purposes, try both options so you familiarise yourself with creating and loading datasets in R.</p>
<section id="option-1-create-your-dataset" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="option-1-create-your-dataset"><span class="header-section-number">2.2.1</span> Option 1: Create your Dataset</h3>
<p>In base R, we will create our vectors and combine them into a data frame. Use the following code to create your variables:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create vectors for our data</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>id <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">30</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create age bands with labels</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>age_bands <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"&lt;21"</span>, <span class="st">"21-30"</span>, <span class="st">"31-40"</span>, <span class="st">"41-50"</span>, <span class="st">"&gt;50"</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create gender categories with labels</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">9</span>),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">9</span>),</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Other"</span>, <span class="st">"Prefer not to say"</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In R, we use <code>factor()</code> to create categorical variables. This is similar to value labels in SPSS. The <code>levels</code> argument specifies the underlying codes, while <code>labels</code> provides the human-readable labels.</p>
</div>
</div>
<p>We now combine the variables that we created in the previous step into a <code>data.frame</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine into a data frame</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>survey_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ID =</span> id,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">AgeBand =</span> age_bands,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Gender =</span> gender</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can easily explore and check the basic structure of your data and get a summary:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the first few rows using head()</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(survey_data)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the structure</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(survey_data)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get basic summary statistics</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When working with data in R, saving and reloading data efficiently is crucial for reproducibility and sharing. Two common file formats for saving data in R are <strong>.csv files</strong> and <strong>.rds files</strong>. While both serve the purpose of persisting data for future use, they have distinct differences in terms of structure, use cases, and functionality.</p>
<p>You can use the following code to save your dataset in either format. In line with the best practice around folder structures, the code below works only if you created the <code>data</code> folder within your project folder or working directory. <strong>For this tutorial, save your output as a .csv file (without row names).</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as R data file</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(survey_data, <span class="st">"data/survey_data_export.rds"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as .csv</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(survey_data, <span class="st">"data/survey_data_export_rows.csv"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># By default, the data is exported with row names. Now to export data without row names we simply have to pass row.names=FALSE as an argument in the write.csv() function.</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(survey_data, <span class="st">"data/survey_data_export.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A <strong>.csv file</strong> (comma-separated values) is a plain text format commonly used for storing tabular data. Each row in the file corresponds to a row in the dataset, and columns are separated by commas. In general, .csv files are platform-independent, widely supported by software like Excel, and easily shared or imported into other programming environments.</p>
<p>An <strong>.rds file</strong> is a native R binary format used to store a single R object. Unlike .csv, .rds files preserve all attributes and data types, including factors, column classes, and even more complex structures like lists, models, or custom objects. The table below outlines the main differences between saving a data frame in each format.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Key differences between .csv and .rds diles</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Feature</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CSV</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">RDS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Format</td>
<td style="text-align: left;">Plain text</td>
<td style="text-align: left;">Binary (R-specific)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Portability</td>
<td style="text-align: left;">Cross-platform and software-independent</td>
<td style="text-align: left;">R-specific</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Metadata</td>
<td style="text-align: left;">Does not retain R-specific attributes</td>
<td style="text-align: left;">Retains all R-specific attributes</td>
</tr>
<tr class="even">
<td style="text-align: left;">Complex objects</td>
<td style="text-align: left;">Supports tabular data only</td>
<td style="text-align: left;">Supports any R object</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Human-readable</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
</tr>
<tr class="even">
<td style="text-align: left;">Efficiency</td>
<td style="text-align: left;">Slower for large datasets</td>
<td style="text-align: left;">Faster and more compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Use case</td>
<td style="text-align: left;">Sharing data with non-R users or if the data will be processed in other tools like Excel or Python</td>
<td style="text-align: left;">Storing and reloading your data with all its R-specific features, particularly suitable for storing large datasets or complex objects that need to be efficiently loaded</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="option-2-load-your-dataset" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="option-2-load-your-dataset"><span class="header-section-number">2.2.2</span> Option 2: Load your Dataset</h3>
<p>As an alternative to creating your own dataset, you can <a href="../data/lab-uofg-01/lab1-exercise-a.csv" download="lab1-exercise-a.csv">download the dataset</a>. Copy this file into your <code>data</code> folder and then run the following code:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the CSV file stored in the "data" folder</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>survey_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/lab1-exercise-a.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can easily explore and check the basic structure of your data and get a summary:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the first few rows using head()</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(survey_data)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the structure</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(survey_data)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get basic summary statistics</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The imported dataset contain only the numerical values. We will use <code>factor()</code> again transform this into categorical variables with <code>levels</code> specifying the underlying codes and <code>labels</code> providing the human-readable labels.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels for "AgeBand"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>survey_data<span class="sc">$</span>AgeBand <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  survey_data<span class="sc">$</span>AgeBand,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"&lt;21"</span>, <span class="st">"21-30"</span>, <span class="st">"31-40"</span>, <span class="st">"41-50"</span>, <span class="st">"&gt;50"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels for "Gender"</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>survey_data<span class="sc">$</span>Gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  survey_data<span class="sc">$</span>Gender,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">9</span>),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Other"</span>, <span class="st">"Prefer not to say"</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="step-a3-modifying-your-dataset" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="step-a3-modifying-your-dataset"><span class="header-section-number">2.3</span> Step A3: Modifying your Dataset</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This step is not needed, the dataset that you created with the code (Step A2, option 1) or downloaded (Step A2, option 2) are already correct, but have a look and get an overview of what you can do with R.</p>
<p>We create a copy of the data frame that we use for the remainder of the lab. <strong>Please run the following code before experimenting with possible modifications:</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>survey_data_copy <span class="ot">&lt;-</span> survey_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Data frames are among the most commonly used data structures in R, especially for storing and analyzing tabular data. Once a data frame is loaded or created, it is often necessary to modify it to suit specific analytical needs. Common modifications include editing specific values, adding or removing columns and rows, and renaming variables. These operations can be performed efficiently using <strong>base R</strong>, without the need for additional packages. Understanding these basic techniques is essential for working effectively with data in R.</p>
<section id="editing-specific-values" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="editing-specific-values"><span class="header-section-number">2.3.1</span> Editing Specific Values</h3>
<p>You can directly access and modify specific elements of a data frame using <strong>indexing</strong> with square brackets <code>[ , ]</code>. The format is <code>data[row, column]</code>, where you specify the row and column to edit. You can also use column names for clarity.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit the Gender of the participant with ID 15</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>survey_data_copy[survey_data_copy<span class="sc">$</span>ID <span class="sc">==</span> <span class="dv">15</span>, <span class="st">"Gender"</span>] <span class="ot">&lt;-</span> <span class="st">"Female"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(survey_data_copy[survey_data_copy<span class="sc">$</span>ID <span class="sc">==</span> <span class="dv">15</span>, ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, the gender for the participant with ID 15 is updated to “Female.”</p>
</section>
<section id="adding-a-column" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="adding-a-column"><span class="header-section-number">2.3.2</span> Adding a Column</h3>
<p>To add a new column to a data frame, use the <code>$</code> operator or specify the new column name within square brackets.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a new column indicating if the participant is above 30 based on AgeBand</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>survey_data_copy<span class="sc">$</span>Above30 <span class="ot">&lt;-</span> survey_data_copy<span class="sc">$</span>AgeBand <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"31-40"</span>, <span class="st">"41-50"</span>, <span class="st">"&gt;50"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(survey_data_copy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This new column indicates whether each participant belongs to an age group over 30.</p>
</section>
<section id="adding-a-row" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="adding-a-row"><span class="header-section-number">2.3.3</span> Adding a Row</h3>
<p>To append a new row, use the <code>rbind()</code> function, which binds rows together.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a new participant to the data frame</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>new_row <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> <span class="dv">31</span>, <span class="at">AgeBand =</span> <span class="st">"&lt;21"</span>, <span class="at">Gender =</span> <span class="st">"Other"</span>, <span class="at">Above30 =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>survey_data_copy <span class="ot">&lt;-</span> <span class="fu">rbind</span>(survey_data_copy, new_row)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">tail</span>(survey_data_copy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="removing-a-column" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="removing-a-column"><span class="header-section-number">2.3.4</span> Removing a Column</h3>
<p>You can remove a column by setting it to <code>NULL</code> or by subsetting the data frame without that column.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the "Above30" column</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>survey_data_copy<span class="sc">$</span>Above30 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(survey_data_copy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="removing-a-row" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="removing-a-row"><span class="header-section-number">2.3.5</span> Removing a Row</h3>
<p>To remove a row, subset the data frame, excluding the unwanted row.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the row where ID is 10</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>survey_data_copy <span class="ot">&lt;-</span> survey_data_copy[survey_data_copy<span class="sc">$</span>ID <span class="sc">!=</span> <span class="dv">10</span>, ]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(survey_data_copy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="renaming-columns" class="level3" data-number="2.3.6">
<h3 data-number="2.3.6" class="anchored" data-anchor-id="renaming-columns"><span class="header-section-number">2.3.6</span> Renaming Columns</h3>
<p>Renaming columns can be done by directly modifying the <code>names()</code> of the data frame.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(survey_data_copy) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ParticipantID"</span>, <span class="st">"AgeGroup"</span>, <span class="st">"GenderIdentity"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(survey_data_copy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="combining-data-frames" class="level3" data-number="2.3.7">
<h3 data-number="2.3.7" class="anchored" data-anchor-id="combining-data-frames"><span class="header-section-number">2.3.7</span> Combining Data Frames</h3>
<p>You can merge two data frames using <code>merge()</code> to combine them based on a common column.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create another data frame with additional information</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>additional_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ParticipantID =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">CompletedSurvey =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge data frames by the "ParticipantID" column</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>survey_data_copy <span class="ot">&lt;-</span> <span class="fu">merge</span>(survey_data_copy, additional_data, <span class="at">by =</span> <span class="st">"ParticipantID"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(survey_data_copy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="summary" class="level3" data-number="2.3.8">
<h3 data-number="2.3.8" class="anchored" data-anchor-id="summary"><span class="header-section-number">2.3.8</span> Summary</h3>
<p>These are some of the most common operations for modifying data frames in base R. Mastering these techniques will allow you to efficiently manipulate data frames and tailor them to your analytical needs:</p>
<ul>
<li><strong>Edit specific values:</strong> Modify elements using <code>data[row, column]</code>.</li>
<li><strong>Add a column:</strong> Use <code>$</code> or square brackets.</li>
<li><strong>Add a row:</strong> Use <code>rbind()</code>.</li>
<li><strong>Remove a column:</strong> Set it to <code>NULL</code> or subset the data frame.</li>
<li><strong>Remove a row:</strong> Subset the data frame excluding the row.</li>
<li><strong>Rename columns:</strong> Modify <code>names()</code> directly.</li>
<li><strong>Combine data frames:</strong> Use <code>merge()</code>.</li>
</ul>
</section>
</section>
<section id="step-a4-frequency-tables-summary-statistics" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="step-a4-frequency-tables-summary-statistics"><span class="header-section-number">2.4</span> Step A4: Frequency Tables (Summary Statistics)</h2>
<p>Frequency tables are a fundamental tool in data analysis for summarizing and understanding the distribution of categorical variables. They show how often each category appears in a dataset, helping analysts quickly grasp patterns and trends. In business research, frequency tables are commonly used to analyze survey results, customer demographics, or product categories. In R, base functions like <code>table()</code> and <code>prop.table()</code> provide a straightforward way to create and analyze frequency tables.</p>
<p>This guide introduces frequency tables using the <code>survey_data</code> data frame and demonstrates their creation and interpretation.</p>
<section id="when-and-why-to-use-frequency-tables" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="when-and-why-to-use-frequency-tables"><span class="header-section-number">2.4.1</span> When and Why to Use Frequency Tables</h3>
<p>Frequency tables are particularly useful when:</p>
<ul>
<li>You need to summarize <strong>categorical data</strong> (e.g., age groups, gender, product categories).</li>
<li>You want to identify <strong>dominant categories</strong> or patterns in responses.</li>
<li>You need a quick check for <strong>data quality</strong> (e.g., missing values or unexpected categories).</li>
<li>You are preparing data for <strong>visualization</strong> or further statistical analysis.</li>
</ul>
<p>By condensing raw data into an easy-to-read format, frequency tables simplify decision-making and analysis.</p>
</section>
<section id="creating-a-basic-frequency-table" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="creating-a-basic-frequency-table"><span class="header-section-number">2.4.2</span> Creating a Basic Frequency Table</h3>
<p>The <code>table()</code> function in R generates frequency counts for one or more variables. For example, to count the number of participants in each age bandn and for each gender:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for AgeBand</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>age_band_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>AgeBand)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for Gender</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>gender_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>Gender)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the results</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Frequency table for AgeBand:"</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(age_band_freq)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Frequency table for Gender:"</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(gender_freq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This table displays the count of participants in each age group.</p>
</section>
<section id="adding-proportions" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="adding-proportions"><span class="header-section-number">2.4.3</span> Adding Proportions</h3>
<p>Proportions show the relative frequency of each category as a percentage of the total. Use the <code>prop.table()</code> function to calculate proportions from a frequency table:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions for AgeBand</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>age_band_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(age_band_freq)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(age_band_prop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The output shows the proportion of participants in each age group. To display percentages, multiply by 100:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions as percentages</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>age_band_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">prop.table</span>(age_band_freq) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(age_band_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This provides a clear picture of the distribution of age groups as percentages. You can also combine the basic frequency table with the proportions and print the combined results:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for AgeBand</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>age_band_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>AgeBand)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions as percentages for AgeBand</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>age_band_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">prop.table</span>(age_band_freq) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine frequencies and percentages</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>age_summary <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Frequency =</span> age_band_freq,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage =</span> age_band_percent</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the results</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"AgeBand Distribution:"</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(age_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="summary-statistics-for-frequency-tables" class="level3" data-number="2.4.4">
<h3 data-number="2.4.4" class="anchored" data-anchor-id="summary-statistics-for-frequency-tables"><span class="header-section-number">2.4.4</span> Summary Statistics for Frequency Tables</h3>
<p>Once you have created a frequency table, you might want to extract specific insights:</p>
<ul>
<li><strong>Mode:</strong> The category with the highest frequency.</li>
<li><strong>Rare categories:</strong> Categories with very low frequencies.</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the most frequent AgeBand</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>most_frequent_age_band <span class="ot">&lt;-</span> <span class="fu">names</span>(age_band_freq[<span class="fu">which.max</span>(age_band_freq)])</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Most frequent age band:"</span>, most_frequent_age_band))</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify rare categories (frequency &lt;= 2)</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>rare_categories <span class="ot">&lt;-</span> <span class="fu">names</span>(age_band_freq[age_band_freq <span class="sc">&lt;=</span> <span class="dv">2</span>])</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Rare categories:"</span>, <span class="fu">paste</span>(rare_categories, <span class="at">collapse =</span> <span class="st">", "</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="handling-missing-or-unexpected-values" class="level3" data-number="2.4.5">
<h3 data-number="2.4.5" class="anchored" data-anchor-id="handling-missing-or-unexpected-values"><span class="header-section-number">2.4.5</span> Handling Missing or Unexpected Values</h3>
<p>Frequency tables are also useful for spotting missing or unexpected values. For instance:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for missing or unusual values in Gender</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>gender_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>Gender, <span class="at">useNA =</span> <span class="st">"ifany"</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(gender_freq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>useNA</code> argument ensures that missing values (if any) are included in the table.</p>
</section>
</section>
<section id="step-a5-cross-tabulation" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="step-a5-cross-tabulation"><span class="header-section-number">2.5</span> Step A5: Cross-Tabulation</h2>
<p>Cross-tabulations, also known as contingency tables, are a powerful tool in data analysis for examining the relationship between two or more categorical variables. They provide a matrix of frequency counts that show how categories of one variable are distributed across categories of another. Cross-tabulations are widely used in business analytics, such as comparing demographics (e.g., age and gender) or tracking customer behavior across segments.</p>
<p>This guide delves deeper into cross-tabulations using the <code>survey_data</code> data frame, illustrating how to create, interpret, and enhance these tables with additional insights.</p>
<section id="when-and-why-to-use-cross-tabulations" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="when-and-why-to-use-cross-tabulations"><span class="header-section-number">2.5.1</span> When and Why to Use Cross Tabulations</h3>
<p>Cross-tabulations are particularly useful when:</p>
<ul>
<li>You want to <strong>compare distributions</strong> of one variable across levels of another.</li>
<li>You need to <strong>detect patterns</strong> or relationships between categorical variables.</li>
<li>You aim to <strong>summarize multivariate data</strong> for clear communication and decision-making.</li>
<li>You are preparing data for <strong>visualization</strong> (e.g., stacked bar charts or heatmaps).</li>
</ul>
<p>For example, in a survey analysis, you might want to compare how age groups are distributed by gender.</p>
</section>
<section id="creating-a-cross-tabulation" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2" class="anchored" data-anchor-id="creating-a-cross-tabulation"><span class="header-section-number">2.5.2</span> Creating a Cross Tabulation</h3>
<p>In R, the <code>table()</code> function is used to create cross-tabulations. For example, to examine the distribution of participants by <code>AgeBand</code> and <code>Gender</code>:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a cross-tabulation of AgeBand and Gender</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>age_gender_table <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>AgeBand, survey_data<span class="sc">$</span>Gender)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(age_gender_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The resulting table displays the frequency counts for each combination of <code>AgeBand</code> and <code>Gender</code>. For instance:</p>
<ul>
<li>The value at the intersection of <code>&lt;21</code> and <code>Male</code> represents the number of participants who are under 21 and identify as male.</li>
<li>The totals for each row or column provide marginal counts (see <strong>Marginal Totals</strong> below).</li>
</ul>
</section>
<section id="adding-proportions-to-cross-tabulations" class="level3" data-number="2.5.3">
<h3 data-number="2.5.3" class="anchored" data-anchor-id="adding-proportions-to-cross-tabulations"><span class="header-section-number">2.5.3</span> Adding Proportions to Cross Tabulations</h3>
<p>Frequency counts can be converted to proportions to better understand relative distributions. The <code>prop.table()</code> function is used for this purpose.</p>
<p><strong>Proportions for the Entire Table</strong></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions for the entire table</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>age_gender_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(age_gender_table)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(age_gender_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, each value represents the percentage of the total participants in that specific category combination.</p>
<p><strong>Row-Wise Proportions</strong></p>
<p>To see proportions within each row (e.g., the percentage of each gender within an age band):</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Row-wise proportions</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>row_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(age_gender_table, <span class="at">margin =</span> <span class="dv">1</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(row_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This output helps answer questions like, “What percentage of individuals in the <code>31-40</code> age group identify as <code>Female</code>?”</p>
<p><strong>Column-Wise Proportions</strong></p>
<p>To see proportions within each column (e.g., the percentage of each age band within a gender):</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Column-wise proportions</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>col_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(age_gender_table, <span class="at">margin =</span> <span class="dv">2</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(col_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This output helps answer questions like, “What percentage of individuals identifying as <code>Male</code> are in the <code>41-50 age band</code>?”</p>
</section>
<section id="marginal-totals" class="level3" data-number="2.5.4">
<h3 data-number="2.5.4" class="anchored" data-anchor-id="marginal-totals"><span class="header-section-number">2.5.4</span> Marginal Totals</h3>
<p>Adding row and column totals to a cross-tabulation provides a comprehensive overview of the data. Use the <code>addmargins()</code> function to include these totals:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add row and column totals to the table</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>age_gender_with_totals <span class="ot">&lt;-</span> <span class="fu">addmargins</span>(age_gender_table)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(age_gender_with_totals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The row totals show the distribution of participants across age bands, while the column totals display the distribution across gender categories.</p>
</section>
<section id="customizing-cross-tabulation-output" class="level3" data-number="2.5.5">
<h3 data-number="2.5.5" class="anchored" data-anchor-id="customizing-cross-tabulation-output"><span class="header-section-number">2.5.5</span> Customizing Cross Tabulation Output</h3>
<p>For clearer interpretation, you can customize the table’s appearance using descriptive labels for rows and columns. Use <code>dimnames()</code> to update labels:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize row and column names</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(age_gender_table) <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">AgeGroup =</span> <span class="fu">levels</span>(survey_data<span class="sc">$</span>AgeBand),</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">GenderCategory =</span> <span class="fu">levels</span>(survey_data<span class="sc">$</span>Gender)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(age_gender_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="detecting-relationships-in-cross-tabulations" class="level3" data-number="2.5.6">
<h3 data-number="2.5.6" class="anchored" data-anchor-id="detecting-relationships-in-cross-tabulations"><span class="header-section-number">2.5.6</span> Detecting Relationships in Cross Tabulations</h3>
<p>Cross-tabulations provide a foundation for detecting relationships between variables. While frequency counts and proportions are descriptive, statistical tests such as the <strong>Chi-Square Test</strong> can quantify the association between variables.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform a Chi-Square Test of Independence</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>chi_test <span class="ot">&lt;-</span> <span class="fu">chisq.test</span>(age_gender_table)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(chi_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The test evaluates whether there is a significant association between <code>AgeBand</code> and <code>Gender</code>. A p-value less than 0.05 suggests that the relationship is statistically significant.</p>
<p><strong>Note:</strong> R might show a warning <code>Chi-squared approximation may be incorrect</code>, which indicates that the conditions for the Chi-Square test’s validity may not be fully met. Specifically, the test assumes that expected frequencies in each cell of the contingency table are sufficiently large. Typically, the rule of thumb is that each expected cell frequency should be at least 5. You can check the expected frequencies by using the <code>expected</code> attribute of the test result:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the expected frequencies</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>chi_test<span class="sc">$</span>expected</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="summary-1" class="level3" data-number="2.5.7">
<h3 data-number="2.5.7" class="anchored" data-anchor-id="summary-1"><span class="header-section-number">2.5.7</span> Summary</h3>
<p>Cross-tabulations are a versatile tool for analyzing the relationship between categorical variables. Mastering cross-tabulations equips you with the ability to summarize and interpret categorical data effectively, a crucial skill in business research and data analysis. In R, you can:</p>
<ul>
<li>Use <code>table()</code> to create cross-tabulations.</li>
<li>Add proportions with <code>prop.table()</code> for a deeper understanding of relative distributions.</li>
<li>Include totals with <code>addmargins()</code> for a complete summary.</li>
<li>Customize, export, or extend your analysis with statistical tests.</li>
</ul>
</section>
</section>
<section id="step-a6-saving-frequency-tables-and-cross-tabulations" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="step-a6-saving-frequency-tables-and-cross-tabulations"><span class="header-section-number">2.6</span> Step A6: Saving Frequency Tables and Cross-Tabulations</h2>
<p>When analyzing data, frequency tables and cross-tabulations provide valuable insights into categorical variables and their relationships. To share or store these tables for reporting or further analysis, you can save them as <strong>CSV files</strong> or directly export them in a human-readable format. This guide demonstrates both methods, using <code>survey_data</code> for examples.</p>
<section id="saving-frequency-tables" class="level3" data-number="2.6.1">
<h3 data-number="2.6.1" class="anchored" data-anchor-id="saving-frequency-tables"><span class="header-section-number">2.6.1</span> Saving Frequency Tables</h3>
<p>Frequency tables summarize the distribution of a single categorical variable, and you can save them as a CSV file or export them as plain text.</p>
<p><strong>Saving as a CSV File</strong></p>
<p>To save a frequency table as a CSV file, first convert it into a data frame using <code>as.data.frame()</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a frequency table for AgeBand</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>age_band_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>AgeBand)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the frequency table to a data frame</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>age_band_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(age_band_freq)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the data frame to a CSV file</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(age_band_df, <span class="st">"output/tables/age_band_frequency.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This saves the frequency table as a CSV file named age_band_frequency.csv. Each row in the CSV represents a category and its corresponding frequency.</p>
<p><strong>Exporting to Plain Text</strong></p>
<p>For a more human-readable format, you can save the table directly as plain text using <code>capture.output()</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Export the frequency table to a text file</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(age_band_freq, <span class="at">file =</span> <span class="st">"output/tables/age_band_frequency.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The output file, <code>age_band_frequency.txt</code>, contains the frequency table as it appears in the R console.</p>
</section>
<section id="saving-cross-tabulations" class="level3" data-number="2.6.2">
<h3 data-number="2.6.2" class="anchored" data-anchor-id="saving-cross-tabulations"><span class="header-section-number">2.6.2</span> Saving Cross-Tabulations</h3>
<p>Cross-tabulations summarize relationships between two categorical variables. Saving them involves similar steps to frequency tables, with additional considerations for row and column labels.</p>
<p><strong>Saving as a CSV File</strong></p>
<p>Like frequency tables, cross-tabulations can be converted into a data frame for CSV export:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a cross-tabulation of AgeBand and Gender</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>age_gender_table <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>AgeBand, survey_data<span class="sc">$</span>Gender)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the cross-tabulation to a data frame</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>age_gender_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(age_gender_table)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the cross-tabulation to a CSV file</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(age_gender_df, <span class="st">"output/tables/age_gender_cross_tabulation.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This saves the cross-tabulation as a CSV file named <code>age_gender_cross_tabulation.csv</code>. Each row in the CSV represents a unique combination of <code>AgeBand</code> and <code>Gender</code>, along with its frequency.</p>
<p><strong>Exporting to Plain Text</strong></p>
<p>To save a formatted version of the cross-tabulation, use <code>capture.output()</code>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Export the cross-tabulation to a text file</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(age_gender_table, <span class="at">file =</span> <span class="st">"output/tables/age_gender_cross_tabulation.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The file <code>age_gender_cross_tabulation.txt</code> will display the table as it appears in the R console, retaining its tabular structure.</p>
<p><strong>Adding Totals Before Export</strong></p>
<p>Adding marginal totals to cross-tabulations can make them more informative before saving:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add row and column totals</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>age_gender_with_totals <span class="ot">&lt;-</span> <span class="fu">addmargins</span>(age_gender_table)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the table with totals as plain text</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(age_gender_with_totals, <span class="at">file =</span> <span class="st">"output/tables/age_gender_with_totals.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This ensures that row and column totals are included in the exported table for comprehensive analysis.</p>
</section>
<section id="saving-proportions" class="level3" data-number="2.6.3">
<h3 data-number="2.6.3" class="anchored" data-anchor-id="saving-proportions"><span class="header-section-number">2.6.3</span> Saving Proportions</h3>
<p>Proportions provide additional insights and can be saved in the same way as frequency counts. For example:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate proportions for AgeBand</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>age_band_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(age_band_freq)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to a data frame and save as CSV</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>age_band_prop_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(age_band_prop)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(age_band_prop_df, <span class="st">"output/tables/age_band_proportions.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Similarly, cross-tabulation proportions can be saved:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate proportions for the cross-tabulation</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>age_gender_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(age_gender_table)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to a data frame and save as CSV</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>age_gender_prop_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(age_gender_prop)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(age_gender_prop_df, <span class="st">"output/tables/age_gender_proportions.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="summary-2" class="level3" data-number="2.6.4">
<h3 data-number="2.6.4" class="anchored" data-anchor-id="summary-2"><span class="header-section-number">2.6.4</span> Summary</h3>
<p>To save frequency tables and cross-tabulations for reporting or analysis:</p>
<ul>
<li><strong>As CSV files</strong>: Use <code>as.data.frame()</code> and <code>write.csv()</code> to export structured data.</li>
<li><strong>As plain text</strong>: Use <code>capture.output()</code> for human-readable formats.</li>
<li><strong>With proportions</strong>: Save proportions using similar methods to enhance insights.</li>
<li><strong>With totals</strong>: Add marginal totals before exporting for a complete overview.</li>
</ul>
<p>These techniques ensure your tables are accessible for external use, whether for sharing with colleagues, integrating into reports, or storing for reproducibility.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Beautiful, customizable tables with export options with <code>gt</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The <code>gt</code> package is a powerful tool for creating beautiful, publication-quality tables directly in R. It provides an intuitive and flexible workflow for generating summary tables, including frequency tables and cross-tabulations, with advanced formatting options for customization. The <code>gt</code> package is particularly well-suited for reports, presentations, and dashboards.</p>
<p><strong>Creating and Saving Cross-Tabulation</strong></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install package</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"gt"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load janitor package</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a cross-tabulation</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>age_gender_table <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>AgeBand, survey_data<span class="sc">$</span>Gender)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the table to a data frame</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>age_gender_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(age_gender_table)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a gt table</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>gt_table <span class="ot">&lt;-</span> <span class="fu">gt</span>(<span class="at">data =</span> age_gender_df) <span class="sc">%&gt;%</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Cross-Tabulation of Age Band and Gender"</span>,</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Frequency Distribution"</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Var1 =</span> <span class="st">"Age Band"</span>,</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Var2 =</span> <span class="st">"Gender"</span>,</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Freq =</span> <span class="st">"Count"</span></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(Freq),</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">0</span></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="st">"Data Source: Survey Data"</span></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the table as an HTML file</span></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a><span class="fu">gtsave</span>(gt_table, <span class="at">filename =</span> <span class="st">"output/tables/age_gender_cross_tabulation.html"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Advantages:</strong></p>
<ul>
<li>Generating publication-ready tables with advanced customization.</li>
<li>Producing interactive HTML tables for dashboards or web-based reports.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cleaning and Tabulating Data with <code>janitor</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The <code>janitor</code> package offers functions like <code>tabyl()</code> for creating frequency tables and cross-tabulations, with options to directly save them as data frames for further analysis or export.</p>
<p><strong>Creating and Saving Frequency Tables</strong></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install package</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load janitor package</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for AgeBand</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>age_band_freq <span class="ot">&lt;-</span> survey_data <span class="sc">%&gt;%</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(AgeBand)</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as CSV</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(age_band_freq, <span class="st">"output/tables/age_band_frequency.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Creating and Saving Cross-Tabulation</strong></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure that the package is installed and loaded</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-tabulation of AgeBand and Gender</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>age_gender_table <span class="ot">&lt;-</span> survey_data <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(AgeBand, Gender)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as CSV</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(age_gender_table, <span class="st">"output/tables/age_gender_cross_tabulation.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Advantages:</strong></p>
<ul>
<li>Automatically includes proportions and percentages in the output.</li>
<li>Provides a clean and readable tabular output.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Publication-Ready Tables with <code>gtsummary</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The <code>gtsummary</code> package is great for creating cross-tabulations with enhanced formatting and export options.</p>
<p><strong>Creating and Saving Cross-Tabulation</strong></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install package</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"gtsummary"</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load package</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a cross-tabulation table</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>age_gender_table <span class="ot">&lt;-</span> survey_data <span class="sc">%&gt;%</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_cross</span>(</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">row =</span> AgeBand,</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> Gender</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as a CSV or Word document</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="fu">as_gt</span>(age_gender_table) <span class="sc">%&gt;%</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">gtsave</span>(<span class="st">"output/tables/age_gender_cross_tabulation.html"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Advantages:</strong></p>
<ul>
<li>Produces beautifully formatted tables.</li>
<li>Supports export to multiple formats (e.g., HTML, Word, PDF).</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Customizable Table Formatting with <code>flextable</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The <code>flextable</code> package is ideal for customizing tables for reports and presentations such as Word/PowerPoint outputs.</p>
<p><strong>Formatting and Saving a Cross-Tabulation</strong></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install package</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"flextable"</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load package</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert a cross-tabulation to a flextable</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>age_gender_table <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data<span class="sc">$</span>AgeBand, survey_data<span class="sc">$</span>Gender) <span class="sc">%&gt;%</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>ft <span class="ot">&lt;-</span> <span class="fu">flextable</span>(age_gender_table)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as Word document</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="fu">save_as_docx</span>(ft, <span class="at">path =</span> <span class="st">"output/tables/age_gender_cross_tabulation.docx"</span>)</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as PowerPoint document</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="fu">save_as_pptx</span>(ft, <span class="at">path =</span> <span class="st">"output/tables/age_gender_cross_tabulation.pptx"</span>)</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as image</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="fu">save_as_image</span>(ft, <span class="at">path =</span> <span class="st">"output/tables/age_gender_cross_tabulation.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Advantages:</strong></p>
<ul>
<li>Highly customizable appearance.</li>
<li>Export to Word, PowerPoint, or HTML formats.</li>
</ul>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="exercise-b-reports-and-tables" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Exercise B: Reports and Tables</h1>
<p>This exercise focuses on how to produce reports and tables from R using a larger data set.</p>
<section id="step-b1-setup" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="step-b1-setup"><span class="header-section-number">3.1</span> Step B1: Setup</h2>
<p>You can continue working with the same project or working directory (depending on which option you chose in Step A1). To get started with this exercise, please do the following:</p>
<ol type="1">
<li>Please <a href="../data/lab-uofg-01/lab1-survey.csv" download="lab1-survey.csv">download the dataset</a> and save it in the <code>data</code> folder within your project folder or working directory.</li>
<li>Create a new <strong>R script</strong>: Go to <strong>File &gt; New File &gt; R Script</strong>.</li>
<li>Save the script in the <code>scripts</code> folder within your project folder or working directory with an appropriate name, e.g., <code>Lab1_Exercise_B_C.R</code>. (<strong>Note:</strong> For simplicity, we combine Exercises B and C into one script as they are based on the same data, but you can also create separate scripts for each exercise.)</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can either work through the following steps and copy/paste the respective code into the <code>Lab_Exercise_B_C.R</code> file that you created or <a href="../scripts/lab-uofg-01/Lab1_Exercise_B_C.R" download="Lab1_Exercise_B_C.R">download the R script for Exercises B and C</a>, save the downloaded file in the <code>scripts</code> folder, and run the respective code snippets according to the instructions below.</p>
</div>
</div>
</section>
<section id="step-b2-loading-the-data" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="step-b2-loading-the-data"><span class="header-section-number">3.2</span> Step B2: Loading the Data</h2>
<p>Copy the code below into the <code>Lab_Exercise_B.R</code> script and run it:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the CSV file stored in the "data" folder</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>survey_data_full <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/lab1-survey.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can easily explore and check the basic structure of your data and get a summary:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the first few rows using head()</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(survey_data_full)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the structure</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(survey_data_full)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get basic summary statistics</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey_data_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Before moving on to the analysis, we want to take a look at <strong>demographic variables</strong>. Demographic variables are fundamental in empirical research as they capture key characteristics of individuals or populations, such as age, gender, marital status, education level, and socioeconomic background. These variables provide essential context for understanding behaviors, preferences, and outcomes, allowing researchers to analyze patterns, identify trends, and draw meaningful comparisons across groups. In business and social science research, demographic variables are often used to segment data, control for confounding factors, and explore relationships between characteristics and dependent variables. Their inclusion ensures a more comprehensive and nuanced understanding of research findings, enabling the development of targeted strategies and policies.</p>
<p>We want to assign labels to the demographic variables in the <code>survey_data_full</code> data frame using <strong>factors</strong> with labeled levels. This method ensures the data remains categorical but with human-readable labels for easier interpretation and analysis.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert demographic variables to factors with labeled levels</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels for "sex"</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>survey_data_full<span class="sc">$</span>sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  survey_data_full<span class="sc">$</span>sex,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels for "marital"</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>survey_data_full<span class="sc">$</span>marital <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  survey_data_full<span class="sc">$</span>marital,</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>),</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Single"</span>, <span class="st">"Steady relationship"</span>, <span class="st">"Living with partner"</span>,</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Married first time"</span>, <span class="st">"Remarried"</span>, <span class="st">"Separated"</span>,</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Divorced"</span>, <span class="st">"Widowed"</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels for "child"</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>survey_data_full<span class="sc">$</span>child <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>  survey_data_full<span class="sc">$</span>child,</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>)</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels for "educ"</span></span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>survey_data_full<span class="sc">$</span>educ <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>  survey_data_full<span class="sc">$</span>educ,</span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Primary"</span>, <span class="st">"Some secondary"</span>, <span class="st">"Completed high school"</span>,</span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Some additional training"</span>, <span class="st">"Completed undergraduate"</span>,</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Postgraduate completed"</span></span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels for "source"</span></span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>survey_data_full<span class="sc">$</span>source <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a>  survey_data_full<span class="sc">$</span>source,</span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>),</span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Work"</span>, <span class="st">"Spouse or partner"</span>, <span class="st">"Relationships"</span>, <span class="st">"Children"</span>,</span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Family"</span>, <span class="st">"Health/illness"</span>, <span class="st">"Life in general"</span>,</span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Money/finances"</span>, <span class="st">"Lack of time, too much to do"</span></span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign labels for "smoke"</span></span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a>survey_data_full<span class="sc">$</span>smoke <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a>  survey_data_full<span class="sc">$</span>smoke,</span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>)</span>
<span id="cb48-55"><a href="#cb48-55" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>summary()</code> function can be used to confirm that the labels have been applied correctly to the variables.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify changes by printing a summary</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey_data_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="step-b3-exploring-your-data" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="step-b3-exploring-your-data"><span class="header-section-number">3.3</span> Step B3: Exploring your Data</h2>
<p>Exploring the frequencies of demographic variables is a fundamental step in descriptive analysis, offering a clear understanding of the sample composition. By combining <code>table()</code> and <code>prop.table()</code>, we can compute both raw counts and relative proportions, providing a detailed overview of variables like gender, marital status, and education. These insights form the foundation for deeper analyses, such as segmentation or hypothesis testing, ensuring a strong start to any empirical research.</p>
<p><strong>Gender (<code>sex</code>)</strong></p>
<p>The <code>sex</code> variable captures the gender distribution of the sample. To compute and display the frequency table:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for Gender</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>gender_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data_full<span class="sc">$</span>sex)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(gender_freq)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions and percentages</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>gender_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(gender_freq)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>gender_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(gender_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(gender_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This output shows the count and percentage of participants who identify as <code>Male</code> or <code>Female</code>.</p>
<p><strong>Marital Status (<code>marital</code>)</strong></p>
<p>The <code>marital</code> variable indicates the participants’ marital status. To compute and display the frequency table:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for Marital Status</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>marital_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data_full<span class="sc">$</span>marital)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(marital_freq)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions and percentages</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>marital_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(marital_freq)</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>marital_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(marital_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(marital_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This analysis highlights the most common marital statuses in the sample, such as <code>Single</code> or <code>Married first time</code>.</p>
<p><strong>Parental Status (<code>child</code>)</strong></p>
<p>The <code>child</code> variable records whether participants have children. Frequency analysis provides an overview of parental distribution:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for Parental Status</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>child_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data_full<span class="sc">$</span>child)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(child_freq)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions and percentages</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>child_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(child_freq)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>child_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(child_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(child_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This reveals the proportion of participants who have children versus those who do not.</p>
<p><strong>Education Level (<code>educ</code>)</strong></p>
<p>The <code>educ</code> variable reflects participants’ highest level of education. To understand the distribution:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for Education Level</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>educ_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data_full<span class="sc">$</span>educ)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(educ_freq)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions and percentages</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>educ_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(educ_freq)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>educ_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(educ_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(educ_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This breakdown identifies the most common educational backgrounds, such as <code>Completed undergraduate</code> or <code>Postgraduate completed</code>.</p>
<p><strong>Primary Source of Stress (<code>source</code>)</strong></p>
<p>The <code>source</code> variable represents participants’ reported primary source of stress. Analyse the distribution as follows:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for Primary Source of Stress</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>source_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data_full<span class="sc">$</span>source)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(source_freq)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions and percentages</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>source_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(source_freq)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>source_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(source_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(source_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This provides insights into stress sources, such as <code>Work</code>, <code>Family</code>, or <code>Lack of time</code>.</p>
<p><strong>Smoking Status (<code>smoke</code>)</strong></p>
<p>The <code>smoke</code> variable indicates participants’ smoking habits. Use the following code to analyze:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for Smoking Status</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>smoke_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data_full<span class="sc">$</span>smoke)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(smoke_freq)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions and percentages</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>smoke_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(smoke_freq)</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>smoke_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(smoke_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(smoke_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This reveals the proportion of participants who smoke versus those who do not.</p>
<p><strong>Summarising Frequencies</strong></p>
<p>To summarise all frequency tables and proportions in a single view, you can use a structured approach like the code below. This produces a consolidated view of the frequencies and percentages for all demographic variables, making it easier to compare distributions. (<strong>Note:</strong> This requires that you created the individual frequencies and percentages for all variables previously.)</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine frequency tables into a list for easy viewing</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>frequency_summary <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Gender =</span> <span class="fu">list</span>(<span class="at">Count =</span> gender_freq, <span class="at">Percent =</span> gender_percent),</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">MaritalStatus =</span> <span class="fu">list</span>(<span class="at">Count =</span> marital_freq, <span class="at">Percent =</span> marital_percent),</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">ParentalStatus =</span> <span class="fu">list</span>(<span class="at">Count =</span> child_freq, <span class="at">Percent =</span> child_percent),</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">EducationLevel =</span> <span class="fu">list</span>(<span class="at">Count =</span> educ_freq, <span class="at">Percent =</span> educ_percent),</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">StressSource =</span> <span class="fu">list</span>(<span class="at">Count =</span> source_freq, <span class="at">Percent =</span> source_percent),</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">SmokingStatus =</span> <span class="fu">list</span>(<span class="at">Count =</span> smoke_freq, <span class="at">Percent =</span> smoke_percent)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the summary</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(frequency_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="step-b4-exploring-participants-age" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="step-b4-exploring-participants-age"><span class="header-section-number">3.4</span> Step B4: Exploring Participants’ Age</h2>
<p>Frequencies are a powerful tool for summarizing <strong>categorical variables</strong>, but they are less meaningful for continuous or numeric variables like <code>age</code>. In a dataset, age values can range widely, and each unique value may appear only once or a few times, leading to sparse and uninformative frequency tables. For example, a table showing the frequency of exact ages (e.g., <code>23</code>, <code>24</code>, <code>25</code>) provides limited insight into age distribution because it does not group participants into broader, interpretable categories. Instead, <strong>grouping numeric variables into ranges (bands)</strong> transforms continuous data into an ordinal variable, making frequencies more meaningful and enabling comparisons across age groups.</p>
<p>To better analyze and summarize age-related data, we can create a new variable called <code>AgeBand</code> that groups ages into meaningful ranges. Here, we will define six age bands: - <code>&lt;21</code>, <code>21-30</code>, <code>31-40</code>, <code>41-50</code>, <code>51-60</code>, and <code>&gt;60</code>.</p>
<p>The new variable will be ordinal, meaning the age bands have a natural order, which is useful for analysis and visualization.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating an AgeBand variable</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>survey_data_full<span class="sc">$</span>AgeBand <span class="ot">&lt;-</span> <span class="fu">cut</span>(</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  survey_data_full<span class="sc">$</span>age, </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="cn">Inf</span>), </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"&lt;21"</span>, <span class="st">"21-30"</span>, <span class="st">"31-40"</span>, <span class="st">"41-50"</span>, <span class="st">"51-60"</span>, <span class="st">"&gt;60"</span>), </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">right =</span> <span class="cn">TRUE</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify the new AgeBand variable</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency table for AgeBand</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>AgeBand_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data_full<span class="sc">$</span>AgeBand)</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(AgeBand_freq)</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Percentages for AgeBand</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>AgeBand_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(AgeBand_freq)</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>AgeBand_percent <span class="ot">&lt;-</span> <span class="fu">round</span>(AgeBand_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(AgeBand_percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The code above includes some new fucntions, which are explained below:</p>
<ul>
<li><code>cut()</code>: Converts the numeric age variable into an ordinal factor.</li>
<li><code>breaks</code>: Specifies the boundaries for the age bands. -Inf and Inf ensure all ages are included.</li>
<li><code>labels</code>: Assigns descriptive names to each age band.</li>
</ul>
</section>
<section id="step-b5-cross-tabulations" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="step-b5-cross-tabulations"><span class="header-section-number">3.5</span> Step B5: Cross-Tabulations</h2>
<p>In this task, we first analyse the relationship between marital status (<code>marital</code>) and parental status (<code>child</code>). This provides insights into how having children is distributed across different marital statuses.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a cross-tabulation of Marital Status by Parental Status</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>marital_child_table <span class="ot">&lt;-</span> <span class="fu">table</span>(survey_data_full<span class="sc">$</span>marital, survey_data_full<span class="sc">$</span>child)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the cross-tabulation</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(marital_child_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To further analyze the table, we calculate proportions and percentages. These help interpret the relative distribution of parental status within each marital status group or across the entire sample.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportions for the entire table</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>marital_child_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(marital_child_table)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(marital_child_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Row-wise proportions (within marital status groups)</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>marital_child_row_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(marital_child_table, <span class="at">margin =</span> <span class="dv">1</span>)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(marital_child_row_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Column-wise proportions (within parental status groups)</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>marital_child_col_prop <span class="ot">&lt;-</span> <span class="fu">prop.table</span>(marital_child_table, <span class="at">margin =</span> <span class="dv">2</span>)</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">round</span>(marital_child_col_prop <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can also add <strong>marginal totals</strong>. Including row and column totals provides additional context for the distribution.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add marginal totals to the table</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>marital_child_with_totals <span class="ot">&lt;-</span> <span class="fu">addmargins</span>(marital_child_table)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(marital_child_with_totals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Cross-tabulating <code>marital</code> and <code>child</code> provides a detailed view of the relationship between marital status and parental status. By combining raw counts and proportions, we can identify meaningful patterns in the data, supporting deeper insights into family composition and relationships.</p>
<p><strong>Over to you:</strong> use the code above as a blue print and analyse the relationship between other variables.</p>
</section>
</section>
<section id="exercise-c-reports-and-tables" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Exercise C: Reports and Tables</h1>
<p>This exercise focuses on how to produce reports and tables from R using a larger data set.</p>
<section id="step-c1-setup" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="step-c1-setup"><span class="header-section-number">4.1</span> Step C1: Setup</h2>
<p>You can continue working in the same script that you created in Step B1 (the exemplary script that you can download also combined both exercises) or create a new scipt now. For the latter, review Step B1 and save new the script in the <code>scripts</code> folder within your project folder or working directory with an appropriate name, e.g., <code>Lab1_Exercise_C.R</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Using ggplot2 for Data Visualization
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>While base R plotting functions are straightforward and sufficient for creating simple visualizations, the <code>ggplot2</code> package offers a more powerful, flexible, and consistent approach to data visualization. Developed as part of the <strong>tidyverse</strong>, <code>ggplot2</code> is built on the <strong>grammar of graphics</strong>, enabling users to layer graphical components (e.g., data, aesthetics, and geoms) to create complex and customizable plots. Compared to base R, <code>ggplot2</code> excels in:</p>
<ul>
<li><strong>Customization</strong>: Allows fine-tuning of colors, themes, scales, and labels for polished, publication-ready graphics.</li>
<li><strong>Consistency</strong>: Provides a unified framework for visualizing different types of data without requiring separate functions for each type of plot.</li>
<li><strong>Extensibility</strong>: Supports advanced visualizations and easy integration with other tidyverse tools.</li>
</ul>
<p>For example, while base R may require multiple lines of code to create and customize a bar plot, <code>ggplot2</code> simplifies the process, making it both more readable and more intuitive for creating layered, reusable visualizations.</p>
<p>To begin using <code>ggplot2</code> for data visualization in R, you need to ensure the package is installed and loaded into your R session. Follow these simple steps to get started:</p>
<p><strong>1. Install the <code>ggplot2</code> Package</strong></p>
<p>If you haven’t already installed <code>ggplot2</code>, you can do so using the <code>install.packages()</code> function. This only needs to be done once for your system. The command below downloads and installs the package from CRAN (the Comprehensive R Archive Network).</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install ggplot2</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>2. Load the <code>ggplot2</code> Package</strong></p>
<p>Once installed, you need to load the package into your R session using the <code>library()</code> function. This step must be repeated each time you start a new R session and makes all the <code>ggplot2</code> functions available for use in your current R session.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load ggplot2</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>3. Exploring Help and Resources (optional)</strong></p>
<p>You can access detailed documentation and examples for <code>ggplot2</code> by using the help system or exploring online resources. The <code>ggplot2</code> package has extensive documentation and a supportive community, making it easy to learn and apply its powerful tools.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Access the ggplot2 documentation</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> <span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="step-c2-histograms" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="step-c2-histograms"><span class="header-section-number">4.2</span> Step C2: Histograms</h2>
<p>A histogram is a fundamental tool for visualizing the distribution of a continuous variable. It provides a graphical representation of the frequency or density of data values, divided into intervals (bins). Histograms help identify patterns, such as skewness, multimodality, or outliers, and give insight into the overall shape of the data distribution.</p>
<p>Compared to base R, <code>ggplot2</code> offers greater flexibility and customization for creating histograms. You can easily adjust the number of bins, add labels, and style the plot to make it more informative and visually appealing.</p>
<section id="creating-a-histogram-for-tpstress" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="creating-a-histogram-for-tpstress"><span class="header-section-number">4.2.1</span> Creating a Histogram for <code>tpstress</code>**</h3>
<p>In this example, we will create a histogram for the variable <code>tpstress</code> from the <code>survey_data_full</code> dataset. This variable is continuous, making it ideal for a histogram. Run the code below and examine the output, before reading on about the variables and choices that we made here.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a histogram for tpstress</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>histogram_tpstress <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> survey_data_full, <span class="fu">aes</span>(<span class="at">x =</span> tpstress)) <span class="sc">+</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Perceived Stress Levels"</span>,</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Perceived Stress Score (tpstress)"</span>,</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>histogram_tpstress</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/histogram_tpstress.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li><code>ggplot()</code>: Specifies the dataset (<code>survey_data_full</code>) and the mapping of variables to aesthetics (<code>aes()</code>), with <code>tpstress</code> assigned to the x-axis.</li>
<li><code>geom_histogram()</code>: Adds a histogram layer to the plot.</li>
<li><code>binwidth</code>: Sets the width of each bin (adjustable depending on the range of your data - more informationa bout this below).</li>
<li><code>fill</code> and <code>color</code>: Customize the fill color of the bars and the border color.</li>
<li><code>labs()</code>: Adds descriptive labels for the title, x-axis, and y-axis to make the plot clear.</li>
<li><code>theme_minimal()</code>: Applies a clean and simple theme for better aesthetics.</li>
</ul>
<p><strong>Adjusting Bins</strong></p>
<p>The number of bins can significantly affect the visualization. For finer or coarser groupings, adjust the <code>binwidth</code> parameter. For example:</p>
<ul>
<li>Use a smaller <code>binwidth</code> (e.g., <code>binwidth = 2</code>) for detailed distributions.</li>
<li>Use a larger <code>binwidth</code> (e.g., <code>binwidth = 10</code>) for a summarized view.</li>
</ul>
<p><strong>Interpretation of the Graphs</strong></p>
<p>The histogram will display the distribution of the <code>tpstress</code> variable (<a href="#fig-hist-tpstress" class="quarto-xref">Figure&nbsp;1</a>), showing the frequency of scores within each bin. This can help answer questions like:</p>
<ul>
<li>Are most participants experiencing low, moderate, or high stress?</li>
<li>Does the data appear skewed or normally distributed?</li>
</ul>
<div id="fig-hist-tpstress" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist-tpstress-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c2_histogram_tpstress.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist-tpstress-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Histogram of <code>tpstress</code>
</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Saving Plots with <code>ggsave</code> in <code>ggplot2</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>When creating visualizations in R, you often need to save your plots for reports, presentations, or further analysis. The <code>ggsave()</code> function in <code>ggplot2</code> provides an easy and flexible way to save plots to various file formats with high quality.</p>
<p><strong>Overview of <code>ggsave</code></strong></p>
<ul>
<li>Automatically saves the <strong>last plot</strong> created in your R session, or a specified plot object.</li>
<li>Supports various file formats such as PNG, JPEG, PDF, and SVG.</li>
<li>Allows customization of file size, resolution, and aspect ratio.</li>
</ul>
<p><strong>Basic Syntax</strong></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(filename, <span class="at">plot =</span> <span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">20</span>, <span class="at">height =</span> <span class="dv">15</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where:</p>
<ul>
<li><code>filename</code>: The name of the file, including the desired extension (e.g., <code>"plot.png"</code> or <code>"plot.pdf"</code>).</li>
<li><code>plot</code>: Specifies which plot to save. Defaults to the most recent plot (<code>last_plot()</code>).</li>
<li><code>width</code> and <code>height</code>: Specify the dimensions of the plot in inches (default units).</li>
<li><code>units</code>: supports custom units for dimensions (default is inches when not specified).</li>
<li><code>dpi</code>: Sets the resolution of the plot (dots per inch). Higher values (e.g., 300) produce print-quality images.</li>
</ul>
<p><strong>Formats</strong></p>
<p>We can save the histogram for <code>tpstress</code> in different formats, depending on the purpose.</p>
<p><strong>PNG:</strong> For lossless, high-quality images suitable for both web use and presentations.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"histogram_tpstress.png"</span>, <span class="at">plot =</span> scatter_plot, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>PDF:</strong> For vector-based, high-quality graphics suitable for printing.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"histogram_tpstress.pdf"</span>, <span class="at">plot =</span> scatter_plot, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>JPEG:</strong> For compressed images with smaller file sizes (useful for web).</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"histogram_tpstress.pdf"</span>, <span class="at">plot =</span> scatter_plot, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>SVG:</strong> For scalable vector graphics, ideal for interactive web applications.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"histogram_tpstress.pdf"</span>, <span class="at">plot =</span> scatter_plot, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="compare-groups-using-histograms" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="compare-groups-using-histograms"><span class="header-section-number">4.2.2</span> Compare Groups Using Histograms**</h3>
<p>When comparing distributions between groups, it’s often useful to visualize them side by side or stacked for easier comparison. In R, this can be achieved using <strong>facets</strong> in <code>ggplot2</code>, which allow you to create separate subplots for different levels of a categorical variable. In this example, we compare the variable <code>tpstress</code> between males and females (grouped by <code>sex</code>) on separate histograms.</p>
<p><strong>Panelled Histograms</strong></p>
<p>Facets in <code>ggplot2</code> replicate the SPSS functionality of splitting graphs by groups:</p>
<ul>
<li><strong>Side-by-side graphs</strong> allow for direct visual comparison between groups.</li>
<li><strong>Stacked graphs</strong> present the distributions on top of each other for easier alignment.</li>
</ul>
<p><strong>Code to Compare <code>tpstress</code> by <code>sex</code></strong></p>
<p>Here’s the code to create separate histograms for males and females:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Panelled histograms for tpstress by sex</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>histogram_tpstress_gender <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> survey_data_full, <span class="fu">aes</span>(<span class="at">x =</span> tpstress)) <span class="sc">+</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> sex, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span>  <span class="co"># Creates separate panels for each group</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Comparison of Perceived Stress Levels by Gender"</span>,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Perceived Stress Score (tpstress)"</span>,</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>histogram_tpstress_gender</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/histogram_tpstress_gender.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li><code>facet_wrap(~ sex)</code>: Splits the histogram into separate panels for each level of the <code>sex</code> variable (<code>Male</code> and <code>Female</code>). The <code>ncol = 2</code> argument specifies that the graphs should be placed side by side.</li>
<li><code>geom_histogram()</code>: Creates histograms with a consistent binwidth for comparison.</li>
<li><code>labs()</code>: Adds clear labels to describe the plot.</li>
<li><code>theme_minimal()</code>: Ensures a clean and professional appearance.</li>
</ul>
<p><strong>Handling Missing Values</strong></p>
<p>By default, <code>ggplot2</code> excludes cases with missing values in the grouping variable (<code>sex</code>) or the variable being plotted (<code>tpstress</code>). This mirrors SPSS functionality where cases with missing values are excluded on a variable-by-variable basis.</p>
<p>To explicitly confirm exclusions, use the <code>na.omit()</code> function to clean the dataset:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove cases with missing values in tpstress or sex</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>survey_data_filtered <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(survey_data_full[, <span class="fu">c</span>(<span class="st">"tpstress"</span>, <span class="st">"sex"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Alternative Layout: Stacked Panels</strong></p>
<p>To stack the graphs vertically instead of placing them side by side, use <code>facet_wrap()</code> with <code>ncol = 1</code>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stacked histograms for tpstress by sex</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>histogram_tpstress_gender_stack <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> survey_data_full, <span class="fu">aes</span>(<span class="at">x =</span> tpstress)) <span class="sc">+</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> sex, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># Stacks panels vertically</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Comparison of Perceived Stress Levels by Gender (Stacked)"</span>,</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Perceived Stress Score (tpstress)"</span>,</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>histogram_tpstress_gender_stack</span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/histogram_tpstress_gender_stack.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Interpretation of the Graphs</strong></p>
<p>The panelled (<a href="#fig-hist-tpstress_gender" class="quarto-xref">Figure&nbsp;2</a>) and stacked histograms (<a href="#fig-hist-tpstress_gender" class="quarto-xref">Figure&nbsp;2</a>) show the distribution of perceived stress scores (<code>tpstress</code>) for males and females:</p>
<ul>
<li>Look for differences in the shape, spread, and center of the distributions.</li>
<li>Identify patterns such as skewness or concentration of values in specific ranges.</li>
</ul>
<div id="fig-hist-tpstress_gender" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist-tpstress_gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c2_histogram_tpstress_gender.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist-tpstress_gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Panelled histograms for <code>tpstress</code> by <code>sex</code>
</figcaption>
</figure>
</div>
<div id="fig-hist-tpstress_gender_stack" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist-tpstress_gender_stack-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c2_histogram_tpstress_gender_stack.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist-tpstress_gender_stack-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Stacked histograms for <code>tpstress</code> by <code>sex</code>
</figcaption>
</figure>
</div>
</section>
</section>
<section id="step-c3-bar-charts" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="step-c3-bar-charts"><span class="header-section-number">4.3</span> Step C3: Bar Charts</h2>
<p>A bar chart is one of the most basic and widely used tools for visualizing categorical data. It shows the frequencies or counts of different categories, making it ideal for identifying dominant groups, comparing categories, and providing a quick summary of data distributions. Bar charts are especially useful when you want to:</p>
<ul>
<li>Display the distribution of a single categorical variable.</li>
<li>Compare the relative size of categories.</li>
<li>Highlight which categories are most or least common.</li>
</ul>
<p>Bar charts are most effective for categorical or ordinal variables, such as:</p>
<ul>
<li>Demographic variables (e.g., gender, marital status, education level).</li>
<li>Grouping variables (e.g., age bands, product categories).</li>
<li>Summarizing discrete counts (e.g., survey responses, preference rankings).</li>
</ul>
<p>Bar charts are <strong>not suitable</strong> for continuous variables (e.g., <code>tpstress</code>) since these are better visualized using histograms or boxplots.</p>
<section id="creating-a-simple-bar-chart" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="creating-a-simple-bar-chart"><span class="header-section-number">4.3.1</span> Creating a Simple Bar Chart</h3>
<p>In this example, we create a simple bar chart for the variable <code>sex</code>, which represents gender.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple bar chart for Gender</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>bar_gender <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> survey_data_full, <span class="fu">aes</span>(<span class="at">x =</span> sex)) <span class="sc">+</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Gender Distribution"</span>,</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Gender"</span>,</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>bar_gender</span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/bar_gender.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li><code>ggplot()</code>: Specifies the dataset (<code>survey_data_full</code>) and maps the variable <code>sex</code> to the x-axis using <code>aes(x = sex)</code>.</li>
<li><code>geom_bar()</code>: Creates a bar chart. Since no <code>y</code> aesthetic is specified, <code>geom_bar()</code> automatically counts the number of occurrences of each category in <code>sex</code>. <code>fill</code> specifies the color of the bars, while <code>color</code> adds a border around each bar.</li>
<li><code>labs()</code>: Adds descriptive labels to the title, x-axis, and y-axis for clarity.</li>
<li><code>theme_minimal()</code>: Applies a clean, minimal theme for better aesthetics.</li>
</ul>
<p><strong>Interpretation of the Graphs</strong></p>
<p>Running the above code will produce a simple bar chart showing the distribution of males and females in the dataset (<a href="#fig-bar_gender" class="quarto-xref">Figure&nbsp;4</a>). The y-axis represents the count of participants in each gender category.</p>
<div id="fig-bar_gender" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar_gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c3_bar_gender.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar_gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Simple bar chart for <code>sex</code>
</figcaption>
</figure>
</div>
</section>
<section id="creating-a-clustered-bar-chart" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="creating-a-clustered-bar-chart"><span class="header-section-number">4.3.2</span> Creating a Clustered Bar Chart</h3>
<p>In this exercise, we replicate the functionality of SPSS’ <strong>Clustered Bar Chart</strong>, where:</p>
<ul>
<li>A categorical variable (e.g., <code>agegp3</code>) is plotted on the x-axis.</li>
<li>A grouping variable (e.g., <code>sex</code>) determines the clusters (represented by different colors).</li>
<li>A continuous variable (<code>tpstress</code>) is used to calculate the mean for each combination of the categorical variables.</li>
</ul>
<p><code>ggplot2</code> in R provides powerful tools to create clustered bar charts with error bars to visualize group-level summaries clearly.</p>
<p>We will create a clustered bar chart where: - <strong>X-axis</strong>: Represents categories of <code>agegp3</code> (age groups in this example). - <strong>Groups</strong>: Clusters represent <code>sex</code> (males and females), distinguished by colors. - <strong>Y-axis</strong>: Displays the mean of the continuous variable (<code>tpstress</code>) for each group. - <strong>Error Bars</strong>: Represent variability (e.g., standard errors) to give context to the mean values.</p>
<p><strong>Preparing the Data in Base R</strong></p>
<p>Before creating the chart, we summarize the data to calculate the mean and standard error for <code>tpstress</code> within each combination of <code>agegp3</code> and <code>sex</code>:</p>
<p>First, we need to <strong>calculate the group means</strong>. The <code>aggregate()</code> function in base R allows you to compute the mean of a continuous variable (<code>tpstress</code>) for each combination of <code>agegp3</code> and <code>sex</code>.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate group means using aggregate()</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>group_means <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  tpstress <span class="sc">~</span> agegp3 <span class="sc">+</span> sex,</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> survey_data_full,</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> mean,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the group means</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(group_means)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here:</p>
<ul>
<li><code>tpstress ~ agegp3 + sex</code> specifies the grouping variables (<code>agegp3</code> and <code>sex</code>).</li>
<li><code>FUN = mean</code> calculates the mean of <code>tpstress</code> for each group.</li>
<li><code>na.rm = TRUE</code> ensures missing values are excluded.</li>
</ul>
<p>Second, we need to <strong>calculate group standard errors</strong>. To compute standard errors, use <code>aggregate()</code> again for the standard deviation, then calculate the standard error manually.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate group standard deviations</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>group_sd <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  tpstress <span class="sc">~</span> agegp3 <span class="sc">+</span> sex,</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> survey_data_full,</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> sd,</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a column for group sizes</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>group_counts <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(</span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>  tpstress <span class="sc">~</span> agegp3 <span class="sc">+</span> sex,</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> survey_data_full,</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> length</span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the results into a single data frame</span></span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>group_stats <span class="ot">&lt;-</span> <span class="fu">merge</span>(group_means, group_sd, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"agegp3"</span>, <span class="st">"sex"</span>))</span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>group_stats <span class="ot">&lt;-</span> <span class="fu">merge</span>(group_stats, group_counts, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"agegp3"</span>, <span class="st">"sex"</span>))</span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns for clarity</span></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(group_stats) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"agegp3"</span>, <span class="st">"sex"</span>, <span class="st">"mean_tpstress"</span>, <span class="st">"sd_tpstress"</span>, <span class="st">"n"</span>)</span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate standard errors</span></span>
<span id="cb75-24"><a href="#cb75-24" aria-hidden="true" tabindex="-1"></a>group_stats<span class="sc">$</span>se_tpstress <span class="ot">&lt;-</span> group_stats<span class="sc">$</span>sd_tpstress <span class="sc">/</span> <span class="fu">sqrt</span>(group_stats<span class="sc">$</span>n)</span>
<span id="cb75-25"><a href="#cb75-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-26"><a href="#cb75-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the final data frame</span></span>
<span id="cb75-27"><a href="#cb75-27" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(group_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Our <strong>final data frame</strong> <code>group_stats</code> contains:</p>
<ul>
<li><code>agegp3</code>: Age group.</li>
<li><code>sex</code>: Gender group.</li>
<li><code>mean_tpstress</code>: Mean perceived stress score.</li>
<li><code>sd_tpstress</code>: Standard deviation of stress scores.</li>
<li><code>n</code>: Number of participants in each group.</li>
<li><code>se_tpstress</code>: Standard error of the mean.</li>
</ul>
<p><strong>Creating the Clustered Bar Chart</strong></p>
<p>Using the prepared <code>group_stats</code> data, you can now create the clustered bar chart with <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clustered bar chart using the prepared data</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>bar_gender_age <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> group_stats, <span class="fu">aes</span>(<span class="at">x =</span> agegp3, <span class="at">y =</span> mean_tpstress, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> mean_tpstress <span class="sc">-</span> se_tpstress, <span class="at">ymax =</span> mean_tpstress <span class="sc">+</span> se_tpstress),</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>),</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.2</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Perceived Stress by Age Group and Gender"</span>,</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age Group"</span>,</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Perceived Stress Score (tpstress)"</span>,</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Gender"</span></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>bar_gender_age</span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/bar_gender_age.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li><code>ggplot()</code>: Specifies the dataset (<code>group_stats</code>) and defines mappings between variables and aesthetics (<code>aes()</code>). <code>fill = sex</code> Uses the <code>sex</code> variable (gender) to determine the color of the bars.</li>
<li><code>geom_bar()</code>: Creates the bar chart. <code>stat = "identity"</code> plots the actual values of <code>mean_tpstress</code> instead of counting occurrences (default behavior). <code>position = position_dodge(width = 0.8)</code> separates the bars into clusters by <code>sex</code>, leaving a small gap between groups. <code>color = "black"</code> adds a black border around each bar to enhance visual distinction.</li>
<li><code>geom_errorbar()</code>: Adds error bars to the bars. <code>ymin</code> and <code>ymax</code> define the range of the error bars (mean ± standard error). <code>width = 0.2</code> controls the width of the error bar caps.</li>
<li><code>labs()</code> adds a descriptive title, axis labels, and a legend title.</li>
<li><code>theme_minimal()</code> ensures a clean and professional look.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alternative using <code>dplyr</code> package
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>A simpler way to prepare the data is to use the `dplyr’ package.</p>
<p><strong>Preparing the Data</strong></p>
<p>Before creating the chart, we summarize the data to calculate the mean and standard error for <code>tpstress</code> within each combination of <code>agegp3</code> and <code>sex</code>:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dplyr</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the data</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>survey_summary <span class="ot">&lt;-</span> survey_data_full <span class="sc">%&gt;%</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agegp3, sex) <span class="sc">%&gt;%</span></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_tpstress =</span> <span class="fu">mean</span>(tpstress, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_tpstress =</span> <span class="fu">sd</span>(tpstress, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>())</span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the summarized data</span></span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(survey_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Creating the Clustered Bar Chart</strong></p>
<p>Using the summarized data, we can create a clustered bar chart with error bars:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a clustered bar chart with ggplot2</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>bar_gender_age2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> survey_summary, <span class="fu">aes</span>(<span class="at">x =</span> agegp3, <span class="at">y =</span> mean_tpstress, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean_tpstress <span class="sc">-</span> se_tpstress, <span class="at">ymax =</span> mean_tpstress <span class="sc">+</span> se_tpstress),</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Perceived Stress by Age Group and Gender"</span>,</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age Group"</span>,</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Perceived Stress Score (tpstress)"</span>,</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Gender"</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>bar_gender_age2</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/bar_gender_age2.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li>The <code>dplyr</code> package is used to calculate the mean (<code>mean_tpstress</code>) and standard error (<code>se_tpstress</code>) of <code>tpstress</code> grouped by <code>agegp3</code> and <code>sex</code>.</li>
<li><code>geom_bar()</code>: Creates the bar chart. <code>stat = "identity"</code> specifies that the heights of the bars represent the actual values (means in this case). <code>position = position_dodge(width = 0.8)</code> separates the bars into clusters by <code>sex</code>.</li>
<li><code>geom_errorbar()</code>: Adds error bars to the bars. <code>ymin</code> and <code>ymax</code> define the range of the error bars (mean ± standard error). <code>width = 0.2</code> controls the width of the error bar caps.</li>
<li><code>aes(fill = sex)</code> assigns colors to sex groups.</li>
<li><code>labs()</code> adds a descriptive title, axis labels, and a legend title.</li>
<li><code>theme_minimal()</code> ensures a clean and professional look.</li>
</ul>
</div>
</div>
</div>
<p><strong>Interpretation of the Chart</strong></p>
<p>The clustered bar chart (<a href="#fig-bar_gender_age" class="quarto-xref">Figure&nbsp;5</a>) allows us to compare:</p>
<ul>
<li>Differences in mean perceived stress (<code>tpstress</code>) across age groups (<code>agegp3</code>).</li>
<li>How stress levels differ between males and females (<code>sex</code>) within each age group.</li>
<li>The size of the error bars provides insight into variability within each group.</li>
</ul>
<div id="fig-bar_gender_age" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar_gender_age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c3_bar_gender_age.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar_gender_age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Clustered bar chart for <code>tpstress</code> by <code>sex</code>
</figcaption>
</figure>
</div>
</section>
</section>
<section id="step-c4-line-graphs" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="step-c4-line-graphs"><span class="header-section-number">4.4</span> Step C4: Line Graphs</h2>
<p>Line graphs are a versatile tool for visualizing trends and relationships between variables. They are particularly useful for examining how a continuous variable changes across categories or over time. In this example, we use <code>tpstress</code> (perceived stress) as the continuous variable on the y-axis and <code>agegp5</code> (age group) as the categorical variable on the x-axis. We create two versions:</p>
<ol type="1">
<li>A simple line graph.</li>
<li>A multi-line graph with separate lines for males and females (<code>sex</code>).</li>
</ol>
<section id="creating-a-simple-line-graph" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="creating-a-simple-line-graph"><span class="header-section-number">4.4.1</span> Creating a Simple Line Graph</h3>
<p>A simple line graph shows how the average <code>tpstress</code> score changes across age groups (<code>agegp5</code>).</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the mean tpstress for each age group</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>simple_line_data <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  tpstress <span class="sc">~</span> agegp5,</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> survey_data_full,</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> mean,</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the line graph</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>line_stress_age <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> simple_line_data, <span class="fu">aes</span>(<span class="at">x =</span> agegp5, <span class="at">y =</span> tpstress, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Perceived Stress by Age Group"</span>,</span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age Group"</span>,</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Perceived Stress Score"</span></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>line_stress_age</span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/line_stress_age.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li><code>aggregate()</code> calculates the mean <code>tpstress</code> for each <code>agegp5</code> group while excluding missing values (<code>na.rm = TRUE</code>).</li>
<li><code>ggplot()</code>: Specifies the data (<code>simple_line_data</code>) and maps <code>agegp5</code> to the x-axis and <code>tpstress</code> (mean perceived stress) to the y-axis.</li>
<li><code>geom_line()</code>: Creates the line connecting the points. <code>color = "blue"</code> specifies the color of the line. <code>size = 1</code> adjusts the line thickness.</li>
<li><code>geom_point()</code>: Adds individual points for each age group. <code>color = "blue"</code> matches the line color. <code>size = 2</code> makes the points more visible.</li>
<li><code>labs()</code> adds a descriptive title, axis labels, and a legend title.</li>
<li><code>theme_minimal()</code> ensures a clean and professional look.</li>
</ul>
<p><strong>Interpretation of the Graphs</strong></p>
<p>In the <strong>simple line graph</strong> (<a href="#fig-line-stress-age" class="quarto-xref">Figure&nbsp;6</a>), the x-axis represents age groups (<code>agegp5</code>), and the y-axis shows the mean perceived stress scores (<code>tpstress</code>). The points connected by the line indicate how stress levels change across age groups.</p>
<p>Key questions to consider:</p>
<ul>
<li><strong>Overall Trend</strong>: Do stress levels increase, decrease, or remain stable across age groups?</li>
<li><strong>Peaks and Valleys</strong>: Are there specific age groups with notably higher or lower stress levels?</li>
<li><strong>Outliers</strong>: Are there unexpected jumps or drops in the graph that may warrant further investigation?</li>
</ul>
<div id="fig-line-stress-age" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-line-stress-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c4_line_stress_age.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-line-stress-age-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Simple line graph for age groups (<code>agegp5</code>) and <code>tpstress</code>
</figcaption>
</figure>
</div>
</section>
<section id="creating-a-multi-line-graph" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="creating-a-multi-line-graph"><span class="header-section-number">4.4.2</span> Creating a Multi-Line Graph</h3>
<p>To show separate lines for males and females, we include the <code>sex</code> variable as a grouping and color aesthetic.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the mean tpstress for each combination of age group and gender</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>multi_line_data <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  tpstress <span class="sc">~</span> agegp5 <span class="sc">+</span> sex,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> survey_data_full,</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">FUN =</span> mean,</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the multi-line graph</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>line_stress_age_gender <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> multi_line_data, <span class="fu">aes</span>(<span class="at">x =</span> agegp5, <span class="at">y =</span> tpstress, <span class="at">color =</span> sex, <span class="at">group =</span> sex)) <span class="sc">+</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Perceived Stress by Age Group and Gender"</span>,</span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age Group"</span>,</span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Perceived Stress Score"</span>,</span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Gender"</span></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-21"><a href="#cb80-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb80-22"><a href="#cb80-22" aria-hidden="true" tabindex="-1"></a>line_stress_age_gender</span>
<span id="cb80-23"><a href="#cb80-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-24"><a href="#cb80-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb80-25"><a href="#cb80-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/line_stress_age_gender.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li><code>aggregate()</code> calculates the mean tpstress for each combination of <code>agegp5</code> and <code>sex</code>.</li>
<li><code>ggplot()</code>: Specifies the data (<code>multi_line_data</code>) and maps <code>agegp5</code> to the x-axis, <code>tpstress</code> (mean perceived stress) to the y-axis, <code>sex</code> to the color aesthetic for distinct line colors, and <code>group = sex</code> ensures separate lines for each gender.</li>
<li><code>geom_line()</code>: Creates the line connecting the points. The <code>color</code> aesthetic from <code>aes()</code> applies distinct colors to the lines. <code>size = 1</code> adjusts the line thickness.</li>
<li><code>geom_point()</code>: Adds individual points for each age group. <code>color = "blue"</code> matches the line color. <code>size = 2</code> makes the points more visible.</li>
<li><code>labs()</code> adds a descriptive title, axis labels, and a legend title.</li>
<li><code>theme_minimal()</code> ensures a clean and professional look.</li>
</ul>
<p><strong>Interpretation of the Graphs</strong></p>
<p>The <strong>multi-line graph</strong> adds a layer of complexity by splitting the line into separate paths for males and females (<a href="#fig-line-stress-age-gender" class="quarto-xref">Figure&nbsp;7</a>). Each gender has its own line, distinguished by color. This allows for a direct comparison of stress levels between genders across age groups.</p>
<p>Key questions to consider:</p>
<ul>
<li><strong>Gender Differences</strong>: Do males and females have similar or diverging patterns of stress across age groups?</li>
<li><strong>Crossovers</strong>: Do the lines for males and females intersect at any point, indicating shifts in which gender reports higher stress?</li>
<li><strong>Parallel Trends</strong>: Are the lines generally parallel, suggesting consistent gender differences across age groups?</li>
</ul>
<div id="fig-line-stress-age-gender" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-line-stress-age-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c4_line_stress_age_gender.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-line-stress-age-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Multi-line graph for age groups (<code>agegp5</code>) and <code>tpstress</code> grouped by <code>sex</code>
</figcaption>
</figure>
</div>
<p>In general, both line graphs (simple and multi-line) are useful for identifying:</p>
<ol type="1">
<li><strong>Patterns in Stress Levels</strong>: Are there general trends across age groups?</li>
<li><strong>Group Comparisons</strong>: How do males and females differ in perceived stress levels?</li>
<li><strong>Actionable Insights</strong>: Insights from these graphs can inform targeted interventions or further analysis.</li>
</ol>
<p>By examining the overall shape and relationship of the lines, you can derive meaningful conclusions about the data and identify areas for further exploration.</p>
</section>
</section>
<section id="step-c5-scatterplots" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="step-c5-scatterplots"><span class="header-section-number">4.5</span> Step C5: Scatterplots</h2>
<p>Scatterplots are essential for visualizing the relationship between two continuous variables. They help identify trends, correlations, and potential outliers. By adding categorical grouping and labeling points, scatterplots become even more informative, allowing for deeper insights into patterns within subgroups.</p>
<p>In this exercise, we create three scatterplots using the <code>survey_data_full</code> dataset:</p>
<ol type="1">
<li>A simple scatterplot with <code>tpstress</code> as the dependent variable (y-axis) and <code>tpcoiss</code> as the independent variable (x-axis).</li>
<li>A scatterplot with color-coded points based on <code>sex</code> (categorical grouping).</li>
<li>The same scatterplot as above, but with point labels based on the <code>id</code> variable.</li>
</ol>
<section id="simple-scatterplot" class="level3" data-number="4.5.1">
<h3 data-number="4.5.1" class="anchored" data-anchor-id="simple-scatterplot"><span class="header-section-number">4.5.1</span> Simple Scatterplot</h3>
<p>The first scatterplot shows the relationship between <code>tpstress</code> (perceived stress) and <code>tpcoiss</code> (control over internal states).</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple scatterplot</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>scatter_stress_control <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> survey_data_full, <span class="fu">aes</span>(<span class="at">x =</span> tpcoiss, <span class="at">y =</span> tpstress)) <span class="sc">+</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Scatterplot of Perceived Stress vs Coping Strategies"</span>,</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Coping Strategies (tpcoiss)"</span>,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Perceived Stress (tpstress)"</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>scatter_stress_control</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/scatter_stress_control.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li><code>ggplot()</code> specifies the dataset (<code>survey_data_full</code>) and maps <code>tpcoiss</code> to the x-axis and <code>tpstress</code> to the y-axis.</li>
<li><code>geom_point()</code> adds scatterplot points. <code>color = "blue"</code> sets the color of all points. <code>size = 2</code> adjusts the point size for better visibility.</li>
<li><code>labs()</code> adds a title, x-axis label, and y-axis label for clarity.</li>
<li><code>theme_minimal()</code> ensures a clean and professional appearance.</li>
</ul>
<p><strong>Interpretation of the Graphs</strong></p>
<p>The simple scatterplot shows the relationship between <code>tpstress</code> (perceived stress) and <code>tpcoiss</code> (coping strategies) across all participants (<a href="#fig-scatter-stress-control" class="quarto-xref">Figure&nbsp;8</a>). When examining a scatterplot, there are a few key points to consider.</p>
<ul>
<li>Direction of the relationship:
<ul>
<li>A <strong>negative trend</strong> (points sloping downward) as shown in <a href="#fig-scatter-stress-control" class="quarto-xref">Figure&nbsp;8</a> suggests that higher coping strategies are associated with lower perceived stress.</li>
<li>A <strong>positive trend</strong> (points sloping upward) would, alternatively, suggest that higher coping strategies are associated with higher perceived stress.</li>
<li>A <strong>flat trend</strong> (points scattered without a clear pattern) would, alternatively, suggest no apparent relationship between the variables.</li>
</ul></li>
<li>Strength of the relationship:
<ul>
<li>Points clustered tightly along an imaginary line indicate a <strong>strong relationship</strong>.</li>
<li>Points scattered widely indicate a <strong>weaker relationship</strong> or greater variability.</li>
</ul></li>
<li>Outliers:
<ul>
<li>Points far from the general trend or clustering might indicate participants with unusual scores (e.g., very high stress despite low coping strategies).</li>
</ul></li>
</ul>
<div id="fig-scatter-stress-control" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter-stress-control-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c5_scatter_stress_control.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter-stress-control-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Simple scatterplot for <code>tpstress</code> and <code>tpcoiss</code>
</figcaption>
</figure>
</div>
</section>
<section id="scatterplot-with-categorical-grouping" class="level3" data-number="4.5.2">
<h3 data-number="4.5.2" class="anchored" data-anchor-id="scatterplot-with-categorical-grouping"><span class="header-section-number">4.5.2</span> Scatterplot with Categorical Grouping</h3>
<p>To differentiate points by gender, we map the <code>sex</code> variable to the <code>color</code> aesthetic. This helps identify potential differences in the relationship between <code>tpstress</code> and <code>tpcoiss</code> for males and females.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot with grouping by sex</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>scatter_stress_control_gender <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> survey_data_full, <span class="fu">aes</span>(<span class="at">x =</span> tpcoiss, <span class="at">y =</span> tpstress, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Scatterplot of Perceived Stress vs Coping Strategies by Gender"</span>,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Coping Strategies (tpcoiss)"</span>,</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Perceived Stress (tpstress)"</span>,</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Gender"</span></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>scatter_stress_control_gender</span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/scatter_stress_control_gender.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong></p>
<ul>
<li><code>ggplot()</code> specifies the dataset (<code>survey_data_full</code>) and maps <code>tpcoiss</code> to the x-axis and <code>tpstress</code> to the y-axis, <code>color = sex</code> assigns different colors to males and females.</li>
<li><code>geom_point()</code> adds scatterplot points. <code>color = "blue"</code> sets the color of all points. <code>size = 2</code> adjusts the point size for better visibility.</li>
<li><code>labs()</code> adds a title, x-axis label, and y-axis label for clarity. <code>color = "Gender"</code> labels the legend as “Gender” for clarity.</li>
<li><code>theme_minimal()</code> ensures a clean and professional appearance.</li>
</ul>
<p><strong>Interpretation of the Graphs</strong></p>
<p>The grouped scatterplot adds a layer of complexity by differentiating the points based on <code>sex</code> (males and females) using color coding (<a href="#fig-scatter-stress-control-gender" class="quarto-xref">Figure&nbsp;9</a>), which allows for subgroup comparisons. When examining a grouped scatterplot, there are a few key points to consider.</p>
<ul>
<li>Comparing trends between groups:
<ul>
<li>Look for differences in the direction, strength, or spread of points for each group.</li>
<li>Parallel trends suggest that the relationship between <code>tpstress</code> and <code>tpcoiss</code> is consistent across genders.</li>
<li>Diverging or crossing trends may indicate that the relationship differs between males and females.</li>
</ul></li>
<li>Clustering patterns:
<ul>
<li>Are males and females clustered in similar regions of the plot, or are they spread differently?</li>
<li>For example, one group may predominantly occupy the lower <code>tpcoiss</code> range while the other spans the full range.</li>
</ul></li>
<li>Group-specific outliers:
<ul>
<li>Outliers can be identified separately for each group, helping to explore whether certain groups have more extreme responses.</li>
</ul></li>
</ul>
<div id="fig-scatter-stress-control-gender" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter-stress-control-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c5_scatter_stress_control_gender.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter-stress-control-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Grouped scatterplot for <code>tpstress</code> and <code>tpcoiss</code> by <code>sex</code>
</figcaption>
</figure>
</div>
</section>
<section id="scatterplot-with-point-labels" class="level3" data-number="4.5.3">
<h3 data-number="4.5.3" class="anchored" data-anchor-id="scatterplot-with-point-labels"><span class="header-section-number">4.5.3</span> Scatterplot with Point Labels</h3>
<p>Adding point labels based on the <code>id</code> variable allows us to identify individual data points in the scatterplot. This is similar to the “Point ID label” feature in SPSS.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatterplot with point labels</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>scatter_stress_control_gender_id <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> survey_data_full, <span class="fu">aes</span>(<span class="at">x =</span> tpcoiss, <span class="at">y =</span> tpstress, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> id), <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Scatterplot of Perceived Stress vs Coping Strategies with Point Labels"</span>,</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Coping Strategies (tpcoiss)"</span>,</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Perceived Stress (tpstress)"</span>,</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Gender"</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>scatter_stress_control_gender_id</span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Save plot</span></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"output/figures/scatter_stress_control_gender_id.pdf"</span>, <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Explanation of the Code</strong> (only difference to the previous code)</p>
<ul>
<li><code>geom_text()</code> adds labels to each point. <code>aes(label = id)</code> specifies that each point is labeled with the <code>id</code> variable. <code>hjust = 0, vjust = -0.5</code> adjusts the position of the labels relative to the points. <code>size = 3</code> sets the text size for readability.</li>
<li>The rest of the code is similar to the grouped scatterplot, with points color-coded by gender.</li>
</ul>
<p><strong>Interpretation of the Graphs</strong></p>
<p>The labeled scatterplot builds on the grouped scatterplot by adding participant identifiers (<code>id</code>) as point labels (<a href="#fig-scatter-stress-control-gender-id" class="quarto-xref">Figure&nbsp;10</a>). This is useful for identifying specific data points and exploring individual-level patterns. There are a few key points to consider when analyzing labeled scatterplots.</p>
<ul>
<li>Identifying specific participants:
<ul>
<li>Outliers or points of interest can now be linked to specific participants using their <code>id</code>.</li>
<li>For example, if a participant shows very high <code>tpstress</code> despite low <code>tpcoiss</code>, their <code>id</code> can be used to investigate their survey responses further.</li>
</ul></li>
<li>Label clustering:
<ul>
<li>Overlapping labels can indicate regions with many participants sharing similar scores.</li>
<li>Sparse labels suggest regions with fewer participants, highlighting gaps in the data.</li>
</ul></li>
<li>Potential for follow-up:
<ul>
<li>By identifying participants with unusual scores (e.g., a specific participant shows extreme stress levels <code>tpstress</code> with high coping strategies <code>tpcoiss</code>), researchers can seek qualitative responses or additional variables to better understand these cases.</li>
</ul></li>
</ul>
<div id="fig-scatter-stress-control-gender-id" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter-stress-control-gender-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/c5_scatter_stress_control_gender_id.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter-stress-control-gender-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Grouped scatterplot for <code>tpstress</code> and <code>tpcoiss</code> by <code>sex</code> with point labels
</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="summary-3" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Summary</h1>
<p>This lab introduced you to creating and loading datasets with R, manipulating data, and building basic tables and graphs (similar to the SPSS Lab 1). You can download the respective R scripts for Exercises A and B+C below, in case you created your own:</p>
<ul>
<li><a href="../scripts/lab-uofg-01/Lab1_Exercise_A.R" download="Lab1_Exercise_A.R">R script for Exercise A</a></li>
<li><a href="../scripts/lab-uofg-01/Lab1_Exercise_B_C.R" download="Lab1_Exercise_B_C.R">R script for Exercises B and C</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/bwurth\.github\.io\/research-methods\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/bwurth/research-methods/edit/main/lab-uofg-01/lab-uofg-01.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/bwurth/research-methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>